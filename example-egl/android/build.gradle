apply plugin: 'com.android.application'

android {
    compileSdkVersion = rootProject.ext.sdkVersion

    defaultConfig {
        ndk {
            abiFilters rootProject.ext.archs
        }
    }
    buildTypes {
        release
        debug {
            jniDebuggable true
        }
    }
}

task buildGoDebug(type:Exec) {
    commandLine '../build_go.sh', 'Debug', rootProject.ext.archs
}

task buildGoRelease(type:Exec) {
    commandLine '../build_go.sh', 'Release', rootProject.ext.archs
}

afterEvaluate {
    assembleDebug.dependsOn buildGoDebug
    assembleRelease.dependsOn buildGoRelease
}